<!-- language: html -->
<header class="header">
  <div class="left">
    <img src="assets/images/tasklogo.png" alt="logo" class="logo-img" />
    <span class="app-name">Task</span>
  </div>

  <div class="center">
    <div class="search-bar">
      <mat-icon class="search-icon">search</mat-icon>
      <input
        type="text"
        placeholder="Tìm kiếm"
        class="search-input"
        [(ngModel)]="searchText"
        (keyup.enter)="onSearch()"
      />


    </div>

  </div>

  <div class="right">
    <mat-icon class="notification-icon" (click)="toggleNotification()">
      notifications
    </mat-icon>

    <!-- POPUP THÔNG BÁO -->
    <div class="notification-popup" *ngIf="showNotification">
      <p *ngFor="let n of notifications">{{ n }}</p>

      <p *ngIf="notifications.length === 0" class="empty">
        Không có thông báo
      </p>
    </div>
    <img
      *ngIf="avatarUrl"
      [src]="avatarUrl"
      class="avatar"
      alt="avatar"
      (error)="onAvatarError($event)"
      (click)="toggleAccountPopup()"
    />

    <mat-icon *ngIf="!avatarUrl" class="avatar-icon" (click)="toggleAccountPopup()">account_circle</mat-icon>

    <app-account-popup
      [visible]="isPopupVisible"
      [position]="'header'"
      [user]="user"
      [avatarUrl]="avatarUrl"
      (onClose)="closePopup()"
      (onLogout)="logout()"
      (onCreateWorkspace)="openCreateWorkspace()"
    ></app-account-popup>

    <app-create-workspace
      *ngIf="headerCreateWorkspaceVisible"
      (close)="headerCreateWorkspaceVisible = false"
    ></app-create-workspace>
  </div>