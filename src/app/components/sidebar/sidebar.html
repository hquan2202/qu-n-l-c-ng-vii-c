<div class="sidebar-container">
  <div class="nav-group">
    <div
      class="menu-item"
      routerLink="/home"
      routerLinkActive="active"
      [routerLinkActiveOptions]="{ exact: true }"
    >
      <div class="icon"><mat-icon>home</mat-icon></div>
      <span class="label">Trang chủ</span>
    </div>

    <div
      class="menu-item"
      routerLink="/all-task"
      routerLinkActive="active"
    >
      <div class="icon"><mat-icon>check_circle_outline</mat-icon></div>
      <span class="label">My Tasks</span>
    </div>
  </div>

  <div class="divider"></div>

  <div class="board-section">
    <div class="section-header" (click)="toggleBoards()">
      <span class="section-title">Bảng</span>
      <mat-icon class="arrow-icon">
        {{ isBoardsOpen ? 'expand_more' : 'chevron_right' }}
      </mat-icon>
    </div>

    <div class="board-list" [class.expanded]="isBoardsOpen">
      <div class="menu-item empty" *ngIf="mySoloBoards.length === 0">
        <span class="label" style="opacity: 0.6; font-style: italic;">Chưa có bảng nào</span>
      </div>

      <div
        class="menu-item board-item"
        *ngFor="let board of mySoloBoards; trackBy: trackById"
        [routerLink]="['/card', board.id]"
        routerLinkActive="active"
      >
        <div class="board-content">
          <div class="icon">
            <div
              class="board-dot"
              [style.background]="board.background || board.color || '#ffffff'"
            ></div>
          </div>
          <span class="label">{{ board.title }}</span>
        </div>

        <div class="board-actions" (click)="$event.stopPropagation()">
        </div>
      </div>
    </div>
  </div>

  <div class="board-section">
    <div class="section-header" (click)="toggleTeams()">
      <span class="section-title">Nhóm</span>
      <mat-icon class="arrow-icon">
        {{ isTeamsOpen ? 'expand_more' : 'chevron_right' }}
      </mat-icon>
    </div>

    <div class="board-list" [class.expanded]="isTeamsOpen">

      <div class="sub-section-title">Nhóm của tôi</div>

      <div class="menu-item empty" *ngIf="myGroupsOwned.length === 0">
        <span class="label" style="opacity: 0.6; font-style: italic;">Chưa có nhóm nào</span>
      </div>

      <div
        class="menu-item board-item"
        *ngFor="let board of myGroupsOwned; trackBy: trackById"
        [routerLink]="['/card', board.id]"
        routerLinkActive="active"
      >
        <div class="board-content">
          <div class="icon">
            <div
              class="board-dot"
              [style.background]="board.background || board.color || '#ffffff'"
            ></div>
          </div>
          <span class="label">{{ board.title }}</span>
        </div>
      </div>

      <div class="sub-section-title">Nhóm tôi được mời</div>

      <div class="menu-item empty" *ngIf="myGroupsInvited.length === 0">
        <span class="label" style="opacity: 0.6; font-style: italic;">Chưa được mời vào nhóm nào</span>
      </div>

      <div
        class="menu-item board-item"
        *ngFor="let board of myGroupsInvited; trackBy: trackById"
        [routerLink]="['/card', board.id]"
        routerLinkActive="active"
      >
        <div class="board-content">
          <div class="icon">
            <div
              class="board-dot shared"
              [style.background]="board.background || board.color || '#ffffff'"
            ></div>
          </div>
          <span class="label">{{ board.title }}</span>
        </div>
      </div>

    </div>
  </div>
</div>
