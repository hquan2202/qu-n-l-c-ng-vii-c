<div class="popup-container">
  <div class="popup-content">
    <div class="header">
      <div class="h3">
        <h3>Create board</h3>
      </div>
      <mat-icon class="close-btn" (click)="closePicker()">close</mat-icon>

    </div>

    <!-- Ảnh preview -->
    <div
      class="preview"
      [ngStyle]="{
        'background': selectedBackground.startsWith('http')
          ? 'url(' + selectedBackground + ') center/cover'
          : selectedBackground
      }">
    </div>

    <!-- Chọn nền -->
    <div class="section">
      <label>Background</label>

      <!-- Hiển thị sẵn 4 ảnh nền nhanh -->
      <div class="background-options">
        <img
          *ngFor="let bg of backgrounds"
          [src]="bg"
          (click)="selectBackground(bg)"
          [class.selected]="selectedBackground === bg">
      </div>

      <!-- Hàng màu gradient + dấu ... -->
      <div class="gradient-options">
        <div
          *ngFor="let bg of gradientBackgrounds"
          class="gradient-tile"
          [ngStyle]="{'background': bg}"
          (click)="selectBackground(bg)"
          [class.selected]="selectedBackground === bg">
        </div>

        <!-- Dấu ... mở thêm nền -->
        <div class="gradient-tile more-tile" (click)="togglePicker()">...</div>
      </div>

      <!-- Popup chọn nền nâng cao -->
      <app-background-picker
        *ngIf="showPicker"
        (selectBackground)="onBackgroundSelected($event)"
        (close)="togglePicker()">
      </app-background-picker>
    </div>

    <!-- Tiêu đề bảng -->
    <div class="section">
      <label>Title <span class="required">*</span></label>
      <input
        type="text"
        [(ngModel)]="boardTitle"
        placeholder="Enter a table title..."
        required
        #titleInput="ngModel"
      />
      <!-- Hiển thị lỗi nếu trống -->
      <div class="error" *ngIf="titleInput.invalid && titleInput.touched">
        Please enter a table title.
      </div>
    </div>


    <!-- Quyền xem -->
    <div class="section">
      <label>Viewing rights</label>
      <select>
        <option>Workspace</option>
        <option>Private</option>
      </select>
    </div>

    <!-- Nút hành động -->
    <div class="actions">
      <button class="create-btn" (click)="onCreateBoard()">Create new</button>
    </div>
  </div>
</div>
