<!-- Overlay mờ phía sau -->
<div class="popup-overlay" *ngIf="visible" (click)="onCloseClick()"></div>

<!-- Popup chính -->
<!-- ngClass để đổi vị trí hiển thị giữa header / navbar -->
<div
  class="popup"
  [ngClass]="position === 'header' ? 'popup-header' : 'popup-navbar'"
  *ngIf="visible"
  (click)="$event.stopPropagation()"
>
  <!-- Header user -->
  <div class="popup-user">
    <img
      *ngIf="user"
      [src]="avatarUrl"
      class="avatar avatar--lg"
      alt="avatar"
      (click)="onCloseClick()"
    />

    <div class="user-info">
      <h3>{{ user?.user_metadata?.full_name || 'Người dùng' }}</h3>
      <p>{{ user?.email }}</p>
    </div>
  </div>

  <hr />

  <!-- Nút tạo workspace -->
  <div class="popup-body">
    <button class="menu-btn" (click)="onCreateWorkspaceClick()">
      <mat-icon class="menu-icon">group</mat-icon>
      <span>Create workspace</span>
    </button>
  </div>

  <hr />

  <!-- Nút đăng xuất -->
  <div class="popup-body">
    <button class="logout-btn" (click)="onLogoutClick()">
      <mat-icon class="menu-icon">logout</mat-icon>
      <span>Log out</span>
    </button>
  </div>
</div>
